<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:131.25%/1.5 'Crimson Text',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.73);font-family:'Crimson Text',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;color:hsla(0,0%,0%,0.9);font-family:'Rosario',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}ul{margin-left:1.5rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.5rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;font-size:0.85rem;line-height:1.5rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;font-size:1rem;line-height:1.5rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:1.21875rem;padding-right:0;padding-top:0;margin-bottom:1.5rem;font-size:1.1487rem;line-height:1.5rem;border-left:0.28125rem solid #ff5700;color:hsla(0,0%,0%,0.59);font-style:italic;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.5rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(1.5rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}li > ul{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.5rem / 2);}code{font-size:0.85rem;line-height:1.5rem;}kbd{font-size:0.85rem;line-height:1.5rem;}samp{font-size:0.85rem;line-height:1.5rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1rem;padding-right:1rem;padding-top:0.75rem;padding-bottom:calc(0.75rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#ff5700;text-decoration:none;text-shadow:.03em 0 #fff,-.03em 0 #fff,0 .03em #fff,0 -.03em #fff,.06em 0 #fff,-.06em 0 #fff,.09em 0 #fff,-.09em 0 #fff,.12em 0 #fff,-.12em 0 #fff,.15em 0 #fff,-.15em 0 #fff;background-image:linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 1px, #ff5700 1px, #ff5700 2px, rgba(0, 0, 0, 0) 2px);}a:hover,a:active{text-shadow:none;background-image:none;}h1,h2,h3,h4,h5,h6{margin-top:2.25rem;margin-bottom:0.75rem;}ul,ol{margin-left:1rem;}li>ol,li>ul{margin-left:1rem;margin-bottom:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.5rem;color:hsla(0,0%,0%,0.73);font-style:normal;font-weight:400;}blockquote cite:before{content:"— ";}@media only screen and (max-width:480px){html{font-size:118.75%;line-height:29.85px;}blockquote{border-left:0.28125rem solid #ff5700;color:hsla(0,0%,0%,0.59);padding-left:0.84375rem;font-style:italic;margin-left:-1.125rem;margin-right:0;}}a.gatsby-resp-image-link{box-shadow:none;background-image:none;}.bio p{margin-bottom:0;}</style><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=008654519ce705ac7bc44303a9014606"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=008654519ce705ac7bc44303a9014606"/><meta name="generator" content="Gatsby 2.3.25"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=008654519ce705ac7bc44303a9014606"/><title data-react-helmet="true">Beyond Merge | Midnight Notes</title><meta data-react-helmet="true" name="description" content="Everyone who has spent some time working with git irremediably knows about
merging. Suppose we have a branch called  A  coming from master…"/><style data-href="/styles.f3da2bdbd1dacb8d4a80.css">code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.small-text{font-size:.8em}code[class*=language-]{font-size:.75em}</style><link href="//fonts.googleapis.com/css?family=Rosario:700|Crimson+Text:400,400i,600" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-1518a6ff4e3d1ab2a084.js"/><link as="script" rel="preload" href="/1-5ef0419bfeeef7d5990f.js"/><link as="script" rel="preload" href="/app-5cbf2f13c4104ab00f36.js"/><link as="script" rel="preload" href="/styles-ee9eff4b2717b93862c1.js"/><link as="script" rel="preload" href="/webpack-runtime-a74dc98338c1cb1a75ab.js"/><link as="fetch" rel="preload" href="/static/d/658/path---beyond-merge-bf-8-2bf-NZGsi2GOy2Z1kEGQcJIiyF0WuIM.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="margin-left:auto;margin-right:auto;max-width:36rem;padding:2.25rem 1.125rem"><h3 style="margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit;background-image:none" href="/">Midnight Notes</a></h3><p style="font-size:.9em;margin-bottom:2.25rem">Also available in <a style="box-shadow:none;text-decoration:none" href="/es/mas-alla-de-merge">Castellano / Español</a></p><h1>Beyond Merge</h1><p style="font-size:0.87055rem;line-height:1.5rem;display:block;margin-bottom:1.5rem;margin-top:-0.9375rem">May 01, 2019<!-- -->  ·  <!-- -->14 min read</p><div><p>Everyone who has spent some time working with git irremediably knows about
merging. Suppose we have a branch called <em>A</em> coming from master. The <code class="language-text">merge</code>
command brings the changes carried in <em>A</em> into <em>master</em>.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">71a621b <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> master<span class="token punctuation">)</span> <span class="token punctuation">(</span>A<span class="token punctuation">)</span> A <span class="token function">file</span> updated
2dc6065 <span class="token punctuation">(</span>A<span class="token punctuation">)</span> new A <span class="token function">file</span>
76a1097 Demo <span class="token function">file</span> updated
a31e004 README updated
44d4c5b New README <span class="token function">file</span>
ee42779 New demo <span class="token function">file</span></code></pre></div>
<p>It does works fine, changes are placed ahead the <em>master</em> branch.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">1———2———3———A1———A2</code></pre></div>
<p>The log reflects an incremental order of commits, or put in other words,
the commits are shown in the same order were added. A timeline of changes.</p>
<p>When these modifications have happened at the same time in a <em>B</em> branch, which
is not as rarely as it seems, the merge strategy cannot do a fast-forward
update (bring changes ahead).</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">057a856 <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> master<span class="token punctuation">)</span> Merge branch <span class="token string">'B'</span>
71a621b <span class="token punctuation">(</span>A<span class="token punctuation">)</span> A <span class="token function">file</span> updated
1ac6aff <span class="token punctuation">(</span>B<span class="token punctuation">)</span> B <span class="token function">file</span> updated
2dc6065 <span class="token punctuation">(</span>A<span class="token punctuation">)</span> new A <span class="token function">file</span>
d657116 <span class="token punctuation">(</span>B<span class="token punctuation">)</span> new B <span class="token function">file</span>
76a1097 Demo <span class="token function">file</span> updated
a31e004 README updated
44d4c5b New README <span class="token function">file</span>
ee42779 New demo <span class="token function">file</span></code></pre></div>
<p>Because changes did happened in the same time frame, the merge command makes
use of a recursive strategy intertwining <em>A</em> and <em>B</em> commits.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">1———2———3———B1———A1———B2———A2</code></pre></div>
<p>Interlaced commits don’t keep proper track of branching blocks. Indeed, as seen
above, the <em>B</em> commits precede the ones from <em>A</em>, when in fact they were introduced
after. Besides, the commits are not aligned by meaning, each belonging commit to A
should be placed before the <em>B</em> ones.</p>
<p>There is a way to prevent this scenario once a feature is completed. Instead of
merging the whole bunch of commits, a better option is pushing the changes into
<em>master</em> (or develop) as a unique commit with a descriptive message. This
approach improves the git log traceability.</p>
<p>Perhaps for personal or one-man sized projects is not too important (it is better
to keep at good habits, though) having a strict sorted timeline of events.
But when comes to big teams where each feature needs to be perfectly isolated and
tagged, an unsorted log history would make the difference between mayhem and
harmony in the enterprise.</p>
<p>For those newbies in git (and whose did not find much time to dive into)
there’s more than only merging.</p>
<p>Let’s go beyond merge.</p>
<h2>Rebase</h2>
<p>Unlike merge, rebase allows to do a merge based on a feature branch keeping
track of those related commits blocks in the same slot.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">1———2———3———A1———A2———B1———A2</code></pre></div>
<p>The above picture shows how the the origin branch conserves a linear order
according to the working blocks and not by timestamps.</p>
<p>A convenient way to prevent conflicts while working on a feature branch is to
bring frequently the latest changes from origin branch.</p>
<div class="gatsby-highlight" data-language="git"><pre class="language-git"><code class="language-git">git rebase &lt;origin-branch> </code></pre></div>
<p>Given the next branching state.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">        B1———B2
       /
A1———A2———A3———A4</code></pre></div>
<p><code class="language-text">rebase</code> permits removing momentarily the current commits (the ones that are not
present in the origin branch), put in place the new changes and install on top
feature commits again.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">                  B1———B2
                 /
A1———A2———A3———A4</code></pre></div>
<p>While updating the branch is intended to be carried out as often as possible,
sometimes the differences between both branches are too complex that conflicts
arise. As with merge, conflicts must be resolved but interactevely. <code class="language-text">rebase</code> let
us decide what to do in case of conflicts: fix them and continue or abort. Below
there’s a list of available actions when conflicts occur.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> rebase --continue <span class="token comment"># follow rebase</span>
<span class="token function">git</span> rebase --skip     <span class="token comment"># jump current conflict</span>
<span class="token function">git</span> rebase —-abort    <span class="token comment"># stop rebase and leave things as they were</span>
<span class="token function">git</span> rebase --quit     <span class="token comment"># like abort but keeping the committed changes</span></code></pre></div>
<h2>Forcing push for rebased branches</h2>
<p>It can happen when rebasing, sometimes, the remote repository rejects new
changes because of the rebase itself. The rejection message will read something
about our local branch is behind the remote one.</p>
<p>When the rebase is executed, the new changes coming from the origin branch,
are placed before the current branch commits stack, desynchronising
with the remote picture. In this particular case, the message is confusing,
git asks to update from the remote when, actually, we don’t want.</p>
<p>In order to solve this problem, the push command can be forced by passing the
<code class="language-text">--force</code> option.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> push --force</code></pre></div>
<p><strong>Never, ever, force a push on a collaborative branch</strong>. It will destroy
modifications being carried out by other repository members and you will
become a hatred object among colleagues. Only use <code class="language-text">--force</code> with your own
branches exclusively and under your own risk.</p>
<p>To prevent possible overwritings on the remote branch, there is the
<code class="language-text">--force-with-lease</code> option. Whilst the <code class="language-text">--force</code> option will push changes no
matter what, <code class="language-text">--force-with-lease</code> won’t allow any update if some other
collaborator has added changes to the remote branch.</p>
<p>So, remember, always is preferable not forcing a push action but if there’s no
other way, then make use of <code class="language-text">--force-with-lease</code>.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> push --force-with-lease</code></pre></div>
<h2>Choosing commits</h2>
<p>While working in a branch we don’t pay much attention how the the commit
history looks like. In fact we are focused on development. But when the current
work is already completed, is time to sort the log.  By accumulating all those
non-useful commits, we will end up looking like we’re suffering Diogenes syndrome.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">259aff2 <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> A<span class="token punctuation">)</span> body edit
7a48555 wip: body content
71a621b A <span class="token function">file</span> updated
2dc6065 new A <span class="token function">file</span>
d9ad32e <span class="token punctuation">(</span>master<span class="token punctuation">)</span> A new commit is introduced <span class="token keyword">while</span> previous changes are <span class="token keyword">in</span> stash
13b16a5 Revert <span class="token string">"README updated"</span>
76a1097 Demo <span class="token function">file</span> updated
a31e004 README updated
44d4c5b New README <span class="token function">file</span>
ee42779 New demo <span class="token function">file</span></code></pre></div>
<p>The upper log shows a log history where the master branch (<em>d9ad32e</em>) and the
local HEAD (<em>259aff2</em>) points to different commits. Except the first commit
(<em>2dc6065</em>) there are no meaningful descriptions between them. Since each commit
refers to the same feature, a suitable solution to arrange the log is to use
<code class="language-text">rebase</code> to join them into one commit. </p>
<p><code class="language-text">rebase</code> is not only an alternative to the merge command. Actually, the command
is meant to rewrite the project history. With that notion in mind, <code class="language-text">rebase</code> is
able to be used in the same branch. Instead of specifying a branch name, a
previous commit is passed in. Actually a branch name is not more that a
meaningful name pointing to a commit.</p>
<p>There is more regarding the rebase. It can be executed automatically by default
or interactively by passing the <code class="language-text">-i</code> option. The Interactive mode gives the
possibility to rearrange the log by modifying each commit with a specific command.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">g rebase -i d9ad32e</code></pre></div>
<p>After running the previous command, the default editor pops out opening the
next file. In my case, vim is the default editor but you can set out yours
by using the git config <a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_code_core_editor_code">core.editor</a> option.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">reword 2dc6065 new A <span class="token function">file</span>
fixup 71a621b A <span class="token function">file</span> updated
fixup 7a48555 wip: body content
fixup 259aff2 body edit

<span class="token comment"># Rebase d9ad32e..259aff2 onto d9ad32e (4 commands)</span></code></pre></div>
<p><code class="language-text">fixup</code> or <code class="language-text">f</code> for short, merges in bulk the marked commits with the previously
picked one. In difference with <code class="language-text">squash</code>, <code class="language-text">fixup</code> don’t reuse the provided message.</p>
<p><code class="language-text">reword</code> allows to rewrite the commit message. <code class="language-text">rebase</code> executes the provided
actions after saving the file and closing the editor. When the task has been
completed, the editor jumps again, allowing us to introduce the new commit description. </p>
<p>Once the rebase has completed, the next log looks like below.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">2569f57 <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> A<span class="token punctuation">)</span> feature A
d9ad32e <span class="token punctuation">(</span>master<span class="token punctuation">)</span> A new commit is introduced <span class="token keyword">while</span> previous changes are <span class="token keyword">in</span> stash
13b16a5 Revert <span class="token string">"README updated"</span>
76a1097 Demo <span class="token function">file</span> updated
a31e004 README updated
44d4c5b New README <span class="token function">file</span>
ee42779 New demo <span class="token function">file</span></code></pre></div>
<h2> Lots of related commits</h2>
<p>Sometimes it happens to have a sudden idea while working on in a total different
subject. You stop working immediately what you’re at and start on that new idea.
Damn serendipity!</p>
<p>The next steps from a git perspective are (1) saving things up and (2) create a
new branch. Now, we are able to work in whatever is that brilliant idea. The
git loop starts: Work. Test things up. Save progress. And back to the beginning
of the loop until the job is done.</p>
<p>Finally we go back to the unfinished branch and start working again in the same loop.</p>
<p>Lots of commits are created during this process. All of them refers to the same
topic. So, why keeping all these commits when actually only one commit per branch
will do? Is it not easier to search in the log for a commit with a one nice and
concise message than looking for a bunch of different commits? Are they in the
same slot? Do they got interlaced among unrelated commits?</p>
<p>All right, we can pick and merge commits by doing a rebase, but why bother when
we already know everything relates to the same piece? Why not “squash” all of
them in the same first commit? Sure we can.</p>
<p>Let’s tackle the <em>autosquash</em> feature.</p>
<h3>Autosquash (or how to keep a clean log while working)</h3>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">1a9bfea <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> A<span class="token punctuation">)</span> New A <span class="token function">file</span>
d9ad32e <span class="token punctuation">(</span>master<span class="token punctuation">)</span> A new commit is introduced <span class="token keyword">while</span> previous changes are <span class="token keyword">in</span> stash
13b16a5 Revert <span class="token string">"README updated"</span>
76a1097 Demo <span class="token function">file</span> updated
a31e004 README updated
44d4c5b New README <span class="token function">file</span>
ee42779 New demo <span class="token function">file</span></code></pre></div>
<p>After the first commit (<em>1a9bfea</em>), we see that we’re going to work over the same
file, so the next ones can be coerced up to be part of the first commit in the
current branch by using the option <code class="language-text">--fixup</code>. </p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> commit —fixup<span class="token operator">=</span>1a9bfea</code></pre></div>
<p>As you recall <em>fixup</em> is one of the actions present in the <em>rebase</em> command.
Similarly, this <em>fixup</em> option allows merging the current commit into the
provided one. But first let’s see the resulting log.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">4cca556 <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> A<span class="token punctuation">)</span> fixup<span class="token operator">!</span> New A <span class="token function">file</span>
1a9bfea New A <span class="token function">file</span>
d9ad32e <span class="token punctuation">(</span>master<span class="token punctuation">)</span> A new commit is introduced <span class="token keyword">while</span> previous changes are <span class="token keyword">in</span> stash
13b16a5 Revert <span class="token string">"README updated"</span>
76a1097 Demo <span class="token function">file</span> updated
a31e004 README updated
44d4c5b New README <span class="token function">file</span>
ee42779 New demo <span class="token function">file</span></code></pre></div>
<p>Have you noticed the “fixup!” prefix in the last commit message? Also the
message is the same of the previous commit. Wait! wasn’t supposed to be merged
into the provided commit? Yes, it is. But don’t worry. It’s imperative to keep
the changes in the log, otherwise they could get lost. Later on will see how
they are merged.</p>
<p>There is another way to <em>fixup</em> commits. Instead providing a specific commit hash,
a commit message can be look through by a matching text. The first match will
be used as entry point for the <em>fixup</em>.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> commit —fixup<span class="token operator">=</span>:/A\ <span class="token function">file</span></code></pre></div>
<p>Now, let’s say we change and commit the <em>README</em> file. Then work again in the
previous file a commit with the <em>fixup</em> option again. The resulting log should
look like the picture below.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">1e0118e <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> A<span class="token punctuation">)</span> fixup<span class="token operator">!</span> fixup<span class="token operator">!</span> fixup<span class="token operator">!</span> New A <span class="token function">file</span>
6991e75 README updated
72f1297 fixup<span class="token operator">!</span> fixup<span class="token operator">!</span> New A <span class="token function">file</span>
4cca556 fixup<span class="token operator">!</span> New A <span class="token function">file</span>
1a9bfea New A <span class="token function">file</span>
d9ad32e <span class="token punctuation">(</span>master<span class="token punctuation">)</span> A new commit is introduced <span class="token keyword">while</span> previous changes are <span class="token keyword">in</span> stash
13b16a5 Revert <span class="token string">"README updated"</span>
76a1097 Demo <span class="token function">file</span> updated
a31e004 README updated
44d4c5b New README <span class="token function">file</span>
ee42779 New demo <span class="token function">file</span></code></pre></div>
<p>At this point, the feature branch is completed. Let’s rebase from where the
new log series was established, the commit hash <em>d9ad32e</em>.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> rebase -i —-autosquash d9ad32e </code></pre></div>
<p>The <code class="language-text">—-autosquash</code> option automatically moves every commit message beginning with
“fixup!” right before the commit marked to be modified.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">pick 7eadcf3 New A <span class="token function">file</span>
fixup c913bb3 fixup<span class="token operator">!</span> New A <span class="token function">file</span>
fixup e8bd977 fixup<span class="token operator">!</span> fixup<span class="token operator">!</span> New A <span class="token function">file</span>
fixup 77ca177 fixup<span class="token operator">!</span> fixup<span class="token operator">!</span> fixup<span class="token operator">!</span> New A <span class="token function">file</span>
pick e8fe7f6 README updated

<span class="token comment"># Rebase d9ad32e..77ca177 onto d9ad32e (5 commands)</span></code></pre></div>
<p>We can appreciate how git automatically has replaced the default pick command
by <em>fixup</em>. git knows how to do so because we previously marked the commits were
going to be squashed into the selected commit. The way the order was kept is by
adding a new “fixup!” prefix to the commit message. The more prefixes,
the next in line.</p>
<p>After saving the file the rebase takes action and the resulting log would look
like this.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">d571d6c <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> A<span class="token punctuation">)</span> README updated
8e078dd New A <span class="token function">file</span>
d9ad32e <span class="token punctuation">(</span>master<span class="token punctuation">)</span> A new commit is introduced <span class="token keyword">while</span> previous changes are <span class="token keyword">in</span> stash
13b16a5 Revert <span class="token string">"README updated"</span>
76a1097 Demo <span class="token function">file</span> updated
a31e004 README updated
44d4c5b New README <span class="token function">file</span>
ee42779 New demo <span class="token function">file</span></code></pre></div>
<p>In order to have a more complete example both files are separate commits. The
<code class="language-text">README</code> file update could be part of the same commit, keeping a tighter and
coherent log.</p>
<h2>Squashing a branch into master</h2>
<p>The last way we are going to see how to squash non-useful commits (at least
from a global perspective) can be done by passing the <code class="language-text">--squash</code> option when
executing a merge command.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">* d571d6c - <span class="token punctuation">(</span>A<span class="token punctuation">)</span> README updated <span class="token punctuation">(</span>23 hours ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* 8e078dd - New A <span class="token function">file</span> <span class="token punctuation">(</span>23 hours ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
<span class="token operator">|</span> * 1ac6aff - <span class="token punctuation">(</span>B<span class="token punctuation">)</span> B <span class="token function">file</span> updated <span class="token punctuation">(</span>5 days ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
<span class="token operator">|</span> * d657116 - new B <span class="token function">file</span> <span class="token punctuation">(</span>5 days ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
<span class="token operator">|</span>/
* d9ad32e - <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> master<span class="token punctuation">)</span> A new commit is introduced <span class="token keyword">while</span> previous changes are <span class="token keyword">in</span> stash <span class="token punctuation">(</span>2 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* 13b16a5 - Revert <span class="token string">"README updated"</span> <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* 76a1097 - Demo <span class="token function">file</span> updated <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* a31e004 - README updated <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* 44d4c5b - New README <span class="token function">file</span> <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* ee42779 - New demo <span class="token function">file</span> <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span></code></pre></div>
<p>By looking at the current log, we see branch <em>A</em>, <em>B</em> and <em>master</em> are  pointing to
commits <em>d571d6c</em>, <em>1ac6aff</em> and <em>d9ad32e</em>, respectively. We decide it is time to
squash <em>A</em> and <em>B</em> branches into <em>master</em> but we don’t want to keep the current
commits from both branches. With one commit will be enough to bring both
features. Remember the examples depicted here have an informational purpose,
in real world we will do a commit per branch in order to preserve a succinct
but complete log.</p>
<p>Let’s merge first the <em>B</em> branch.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> merge --squash B</code></pre></div>
<p>If we check the log again, will see no new commit. A squashing merge does not
complete the operation at all. The index state is modified with the changes from
<em>B</em> branch but the pending commit is left for the user. At this point let’s
also merge by squashing the <em>A</em> branch and commiting the changes.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> merge --squash A <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> commit</code></pre></div>
<p>The resulting log do not leave a trace of the individual commits from branches
<em>A</em> and <em>B</em> merged in <em>master</em>. Only one commit stands for changes done in both
branches.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">* ee34439 - <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> master<span class="token punctuation">)</span> Squashed commit of the following: <span class="token punctuation">(</span>12 seconds ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
<span class="token operator">|</span> * d571d6c - <span class="token punctuation">(</span>A<span class="token punctuation">)</span> README updated <span class="token punctuation">(</span>23 hours ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
<span class="token operator">|</span> * 8e078dd - New A <span class="token function">file</span> <span class="token punctuation">(</span>23 hours ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
<span class="token operator">|</span>/
<span class="token operator">|</span> * 1ac6aff - <span class="token punctuation">(</span>B<span class="token punctuation">)</span> <span class="token punctuation">(</span>B<span class="token punctuation">)</span> B <span class="token function">file</span> updated <span class="token punctuation">(</span>5 days ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
<span class="token operator">|</span> * d657116 - <span class="token punctuation">(</span>B<span class="token punctuation">)</span> new B <span class="token function">file</span> <span class="token punctuation">(</span>5 days ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
<span class="token operator">|</span>/
* d9ad32e - A new commit is introduced <span class="token keyword">while</span> previous changes are <span class="token keyword">in</span> stash <span class="token punctuation">(</span>2 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* 13b16a5 - Revert <span class="token string">"README updated"</span> <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* 76a1097 - Demo <span class="token function">file</span> updated <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* a31e004 - README updated <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* 44d4c5b - New README <span class="token function">file</span> <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* ee42779 - New demo <span class="token function">file</span> <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span></code></pre></div>
<p>The last thing to do after is removing the feature branches. Once merged, there’s no need for them.</p>
<p>And this is the final log without feature branches.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">* ee34439 - <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> master<span class="token punctuation">)</span> Squashed commit of the following: <span class="token punctuation">(</span>12 hours ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* d9ad32e - A new commit is introduced <span class="token keyword">while</span> previous changes are <span class="token keyword">in</span> stash <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* 13b16a5 - Revert <span class="token string">"README updated"</span> <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* 76a1097 - Demo <span class="token function">file</span> updated <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* a31e004 - README updated <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* 44d4c5b - New README <span class="token function">file</span> <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span>
* ee42779 - New demo <span class="token function">file</span> <span class="token punctuation">(</span>3 weeks ago<span class="token punctuation">)</span> <span class="token operator">&lt;</span>Enrique Arias<span class="token operator">></span></code></pre></div>
<p>Hope these advices on how git can be used so to maintain an incremental, readable
and clean log are helpful. Perhaps it does not look too important keeping a
sorted log but, believe me, the repo maintaner will be grateful. And also by
doing these practices day by day will have an positive impact in your
professional career. So don’t have a messy log, let the work talk for you.</p></div><hr style="margin-bottom:1.5rem"/><div class="bio" style="display:flex;margin-bottom:3rem"><img src="https://avatars1.githubusercontent.com/u/510375" alt="Enrique Arias" style="margin-right:0.75rem;margin-bottom:0;width:3rem;height:3rem;border-radius:25%"/><div><p>Enrique Arias’ personal blog.
<br />
<span style="font-size: 0.9em; color: gray;">Developer and occasional writer among other things.</span></p></div></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li></li><li></li></ul></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"beyond-merge-bf8","path":"/beyond-merge/"};window.dataPath="658/path---beyond-merge-bf-8-2bf-NZGsi2GOy2Z1kEGQcJIiyF0WuIM";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-5cbf2f13c4104ab00f36.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-3c6d8da1c5b68ed6b359.js"],"component---src-templates-blog-index-js":["/component---src-templates-blog-index-js-cda016dca8c3c8b11124.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-1518a6ff4e3d1ab2a084.js"],"component---src-pages-404-js":["/component---src-pages-404-js-7f7ec1d1337b61511020.js"],"pages-manifest":["/pages-manifest-b85a4ba8922d1cb1d4df.js"]};/*]]>*/</script><script src="/webpack-runtime-a74dc98338c1cb1a75ab.js" async=""></script><script src="/styles-ee9eff4b2717b93862c1.js" async=""></script><script src="/app-5cbf2f13c4104ab00f36.js" async=""></script><script src="/1-5ef0419bfeeef7d5990f.js" async=""></script><script src="/component---src-templates-blog-post-js-1518a6ff4e3d1ab2a084.js" async=""></script></body></html>